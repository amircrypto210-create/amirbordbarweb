<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆÙ‚Ø¹ÛŒØª</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            direction: rtr;
            padding: 50px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            min-height: 100vh;
        }
        .location-info {
            background-color: white;
            border-radius: 20px;
            padding: 40px;
            margin: 30px auto;
            max-width: 600px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        .map-link {
            display: inline-block;
            margin: 15px;
            padding: 15px 30px;
            background-color: #2196F3;
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .map-link:hover {
            background-color: #0b7dda;
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(0,0,0,0.15);
        }
        .coordinates {
            font-family: 'Courier New', monospace;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
            border-right: 5px solid #4CAF50;
            text-align: right;
            font-size: 18px;
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 30px;
        }
        .back-button {
            background-color: #4CAF50;
        }
        .back-button:hover {
            background-color: #3d8b40;
        }
        .map-buttons {
            margin-top: 30px;
        }
        .location-icon {
            font-size: 60px;
            color: #4CAF50;
            margin-bottom: 20px;
        }
        .error-message {
            background-color: #ffebee;
            color: #c62828;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-right: 5px solid #c62828;
        }
        .timestamp {
            color: #666;
            font-size: 14px;
            margin-top: 10px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="location-info">
        <div class="location-icon">ğŸ“</div>
        <h1>Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ</h1>
        
        <div id="locationData">
            <!-- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ JavaScript Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
        </div>
        
        <div class="map-buttons">
            <a href="index.html" class="map-link back-button">
                â†©ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
            </a>
        </div>
    </div>

    <script>
        // Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
        const lat = localStorage.getItem("userLatitude");
        const lng = localStorage.getItem("userLongitude");
        const acc = localStorage.getItem("userAccuracy");
        const timestamp = localStorage.getItem("userTimestamp");
        
        const locationDataEl = document.getElementById("locationData");
        
        // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ú¯Ø± Ù…ÙˆÙ‚Ø¹ÛŒØªÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª
        if(lat && lng) {
            locationDataEl.innerHTML = `
                <h3>Ù…Ø®ØªØµØ§Øª Ø¯Ù‚ÛŒÙ‚:</h3>
                <div class="coordinates">
                    <p><strong>Ø¹Ø±Ø¶ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ (Latitude):</strong> ${parseFloat(lat).toFixed(6)}</p>
                    <p><strong>Ø·ÙˆÙ„ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ (Longitude):</strong> ${parseFloat(lng).toFixed(6)}</p>
                    <p><strong>Ø¯Ù‚Øª Ù…ÙˆÙ‚Ø¹ÛŒØªâ€ŒÛŒØ§Ø¨ÛŒ:</strong> ${acc ? Math.round(acc) : 'Ù†Ø§Ù…Ø´Ø®Øµ'} Ù…ØªØ±</p>
                </div>
                
                <div class="map-buttons">
                    <a href="https://www.google.com/maps?q=${lat},${lng}" class="map-link" target="_blank">
                        ğŸ—ºï¸ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± Google Maps
                    </a>
                    <a href="https://www.openstreetmap.org/?mlat=${lat}&mlon=${lng}#map=15/${lat}/${lng}" 
                       class="map-link" target="_blank" style="background-color: #7CB342;">
                        ğŸŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± OpenStreetMap
                    </a>
                </div>
                
                ${timestamp ? `<div class="timestamp">ğŸ•’ Ø²Ù…Ø§Ù† Ø¯Ø±ÛŒØ§ÙØª: ${new Date(timestamp).toLocaleString('fa-IR')}</div>` : ''}
            `;
        } else {
            // Ø§Ú¯Ø± Ù…ÙˆÙ‚Ø¹ÛŒØªÛŒ Ø°Ø®ÛŒØ±Ù‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª
            locationDataEl.innerHTML = `
                <div class="error-message">
                    <h3>âš ï¸ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØªÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</h3>
                    <p>Ø´Ù…Ø§ Ù‡Ù†ÙˆØ² Ù…ÙˆÙ‚Ø¹ÛŒØª Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯ ÛŒØ§ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù¾Ø§Ú© Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.</p>
                    <p>Ù„Ø·ÙØ§Ù‹ Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø¨Ø§Ø²Ú¯Ø´ØªÙ‡ Ùˆ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯.</p>
                </div>
            `;
            
            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø¢ÛŒÚ©ÙˆÙ† Ù…ÙˆÙ‚Ø¹ÛŒØª
            document.querySelector('.location-icon').style.display = 'none';
        }
        
        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù‚Ø§Ø¨Ù„ÛŒØª Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ù…Ø®ØªØµØ§Øª
        if(lat && lng) {
            const copyButton = document.createElement('button');
            copyButton.innerHTML = 'ğŸ“‹ Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ù…Ø®ØªØµØ§Øª';
            copyButton.style.cssText = `
                margin: 15px;
                padding: 10px 20px;
                background-color: #9C27B0;
                color: white;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                font-size: 14px;
                transition: all 0.3s ease;
            `;
            copyButton.onmouseover = function() { this.style.backgroundColor = '#7B1FA2'; };
            copyButton.onmouseout = function() { this.style.backgroundColor = '#9C27B0'; };
            copyButton.onclick = function() {
                const coords = `${lat}, ${lng}`;
                navigator.clipboard.writeText(coords).then(() => {
                    const originalText = copyButton.innerHTML;
                    copyButton.innerHTML = 'âœ… Ú©Ù¾ÛŒ Ø´Ø¯!';
                    copyButton.style.backgroundColor = '#4CAF50';
                    setTimeout(() => {
                        copyButton.innerHTML = originalText;
                        copyButton.style.backgroundColor = '#9C27B0';
                    }, 2000);
                });
            };
            
            document.querySelector('.map-buttons').prepend(copyButton);
        }
    </script>
</body>
</html>
