<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆÙ‚Ø¹ÛŒØª</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            direction: rtl;
            padding: 50px;
            background-color: #f0f8ff;
        }
        .location-info {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px auto;
            max-width: 500px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .map-link {
            display: inline-block;
            margin-top: 20px;
            padding: 12px 25px;
            background-color: #2196F3;
            color: white;
            text-decoration: none;
            border-radius: 8px;
        }
        .coordinates {
            font-family: monospace;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 15px 0;
        }
        #map {
            height: 300px;
            width: 100%;
            max-width: 500px;
            margin: 20px auto;
            border-radius: 10px;
            display: none;
        }
    </style>
    <!-- Ù„ÙˆØ¯ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Google Maps (Ø§Ø®ØªÛŒØ§Ø±ÛŒ) -->
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap" async defer></script>
</head>
<body>
    <h1>Ù…ÙˆÙ‚Ø¹ÛŒØª Ø´Ù…Ø§ ğŸŒ</h1>
    
    <div class="location-info">
        <h3>Ù…Ø®ØªØµØ§Øª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ:</h3>
        <div class="coordinates">
            <p><strong>Ø¹Ø±Ø¶ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ (Latitude):</strong> <span id="lat">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</span></p>
            <p><strong>Ø·ÙˆÙ„ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ (Longitude):</strong> <span id="lng">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</span></p>
            <p><strong>Ø¯Ù‚Øª:</strong> <span id="acc">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</span> Ù…ØªØ±</p>
        </div>
        
        <div id="map"></div>
        
        <a id="googleMapLink" class="map-link" target="_blank">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± Google Maps</a>
        <br>
        <a class="map-link" href="index.html" style="background-color: #4CAF50;">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
    </div>

    <script>
        // Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
        const lat = localStorage.getItem("userLatitude");
        const lng = localStorage.getItem("userLongitude");
        const acc = localStorage.getItem("userAccuracy");
        
        // Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
        document.getElementById("lat").textContent = lat || "Ù†Ø§Ù…Ø´Ø®Øµ";
        document.getElementById("lng").textContent = lng || "Ù†Ø§Ù…Ø´Ø®Øµ";
        document.getElementById("acc").textContent = acc || "Ù†Ø§Ù…Ø´Ø®Øµ";
        
        // Ø§ÛŒØ¬Ø§Ø¯ Ù„ÛŒÙ†Ú© Google Maps
        if(lat && lng) {
            const mapLink = document.getElementById("googleMapLink");
            mapLink.href = `https://www.google.com/maps?q=${lat},${lng}`;
            mapLink.textContent = `Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¯Ø± Google Maps`;
        }
        
        // Ù†Ù…Ø§ÛŒØ´ Ù†Ù‚Ø´Ù‡ Google (Ø§Ú¯Ø± API Key Ø¯Ø§Ø±ÛŒØ¯)
        function initMap() {
            if(lat && lng) {
                const location = { lat: parseFloat(lat), lng: parseFloat(lng) };
                const map = new google.maps.Map(document.getElementById("map"), {
                    zoom: 15,
                    center: location
                });
                new google.maps.Marker({
                    position: location,
                    map: map
                });
                document.getElementById("map").style.display = "block";
            }
        }
        
        // Ø§Ú¯Ø± API Key Ù†Ø¯Ø§Ø±ÛŒØ¯ØŒ Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø±Ø§ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ù†Ú©Ù†ÛŒØ¯
        // initMap();
        
        // Ø±ÙˆØ´ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² OpenStreetMap (Ù†ÛŒØ§Ø² Ø¨Ù‡ API Key Ù†Ø¯Ø§Ø±Ø¯)
        function showOSMMap() {
            if(lat && lng) {
                const mapElement = document.getElementById("map");
                mapElement.innerHTML = `<iframe 
                    width="100%" 
                    height="300" 
                    frameborder="0" 
                    scrolling="no" 
                    marginheight="0" 
                    marginwidth="0" 
                    src="https://www.openstreetmap.org/export/embed.html?bbox=${lng-0.01},${lat-0.01},${lng+0.01},${lat+0.01}&layer=mapnik&marker=${lat},${lng}"
                    style="border-radius: 10px;">
                </iframe>`;
                mapElement.style.display = "block";
            }
        }
        
        // Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² OpenStreetMapØŒ Ø®Ø· Ø²ÛŒØ± Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯
        // showOSMMap();
    </script>
</body>
</html>